<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>control</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <div id="page">
    <div id="panel">
    <center>
      <h1>Connection Status</h1>
      <h1><span id="active" style="color: red;">●</span>&lt-- TV1 | TV2 --&gt<span id="active1" style="color: red;">●</span> | TV3 --&gt<span id="active2" style="color: red;">●</span></h1>
    <div>
    <button onclick="peerConnect()" class="btn btn-primary btn-lg">Connect to TV1 Screen</button>ㅤ
      <button onclick="peer1Connect()" class="btn btn-primary btn-lg">Connect to TV2 Screen</button>ㅤ
      <button onclick="peer2Connect()" class="btn btn-primary btn-lg">Connect to TV3 Screen</button>
      <div>
        <span></span>
      </div>
    <button onclick="startSlide()" class="btn btn-primary btn-lg">Picture Slideshow (TV1)</button>ㅤ
      <button onclick="startSlide1()" class="btn btn-primary btn-lg">Picture Slideshow (TV2)</button>ㅤ
      <button onclick="startSlide2()" class="btn btn-primary btn-lg">Picture Slideshow (TV3)</button>
      <div>
        <span></span>
      </div>
    <button onclick="startBoing()" class="btn btn-primary btn-lg">Bouncing logo (TV1)</button>ㅤ
      <button onclick="startBoing1()" class="btn btn-primary btn-lg">Bouncing logo (TV2)</button>ㅤ
      <button onclick="startBoing2()" class="btn btn-primary btn-lg">Bouncing logo (TV3)</button>
      <div>
        <span></span>
      </div>
    <button onclick="black()" class="btn btn-primary btn-lg">Black Screen (TV1)</button>ㅤ
      <button onclick="black1()" class="btn btn-primary btn-lg">Black Screen (TV2)</button>ㅤ
      <button onclick="black2()" class="btn btn-primary btn-lg">Black Screen (TV3)</button>
      <div>
        <span></span>
      </div>
    <button onclick="box()" class="btn btn-primary btn-lg">Insert Link (TV1)</button>ㅤ
      <button onclick="box1()" class="btn btn-primary btn-lg">Insert Link (TV2)</button>ㅤ
      <button onclick="box2()" class="btn btn-primary btn-lg">Insert Link (TV3)</button>
      <div>
        <span></span>
      </div>
<button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#image1modal">Add Image (TV1)</button>ㅤ
<button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#image2modal">Add Image (TV2)</button>ㅤ
<button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#image3modal">Add Image (TV3)</button>
<span></span>
</div>
<button onclick="reload()" class="btn btn-primary btn-lg">Reload site (TV1)</button>ㅤ
  <button onclick="reload1()" class="btn btn-primary btn-lg">Reload site (TV2)</button>ㅤ
  <button onclick="reload2()" class="btn btn-primary btn-lg">Reload site (TV3)</button>
  <div>
<div class="modal fade" id="image1modal" tabindex="-1" aria-labelledby="labelthing" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="color: white">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="labelthing">Insert Image For TV1</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input class="form-control" onchange="previewFile()"type="file" id="formFile" accept="image/*">
        <img style="font-size:medium;" src="" height="200" id="displayimg1" alt="Waiting for image..." />
      </div>
      <div class="modal-footer">
        <button type="button" onclick="sendFile()" class="btn btn-secondary" data-bs-dismiss="modal">Send to TV</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="image2modal" tabindex="-1" aria-labelledby="labelthing1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="color: white">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="labelthing1">Insert Image For TV2</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input class="form-control" onchange="previewFile1()"type="file" id="formFile1" accept="image/*">
        <img style="font-size:medium;" src="" height="200" id="displayimg2" alt="Waiting for image..." />
      </div>
      <div class="modal-footer">
        <button type="button" onclick="sendFile1()" class="btn btn-secondary" data-bs-dismiss="modal">Send to TV</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="image3modal" tabindex="-1" aria-labelledby="labelthing2" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="color: white">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="labelthing2">Insert Image For TV3</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input class="form-control" onchange="previewFile2()"type="file" id="formFile2" accept="image/*">
        <img style="font-size:medium;" src="" height="200" id="displayimg3" alt="Waiting for image..." />
      </div>
      <div class="modal-footer">
        <button type="button" onclick="sendFile2()" class="btn btn-secondary" data-bs-dismiss="modal">Send to TV</button>
      </div>
    </div>
  </div>
</div>
    </div>
      <div>
        <span>ㅤ</span>
      </div>
      <div>
      </div>
      </center>
    <script>
        var peer = new Peer()
        var conn;

        function startSlide() {
            conn.send({ name: "slide" });
            return
        }
        function startBoing() {
          conn.send({ name: "bounce" });
          return
        }
        function connectInfo() {
          conn.send({ name: "connect" });
          return
        }
      function black() {
          conn.send({ name: "black" });
          return
        }
        function reload() {
          conn.send({ name: "reload" });
          return
        }
        function box() {
          let promt = prompt("Insert a link to display on TV1 (Make sure to include https:// or it will not work.)");
          conn.send({ name: `<iframe src="${promt}" style="width: 100%;height: 1080px"></iframe>` });
          return
        }
        var peer2 = new Peer()
        var conn2;

        function startSlide2() {
            conn2.send({ name: "slide" });
            return
        }
        function startBoing2() {
          conn2.send({ name: "bounce" });
          return
        }
        function connectInfo2() {
          conn2.send({ name: "connect" });
          return
        }
      function black2() {
          conn2.send({ name: "black" });
          return
        }
        function reload2() {
          conn2.send({ name: "reload" });
          return
        }
        function box2() {
          let promt = prompt("Insert a link to display on TV3 (Make sure to include https:// or it will not work.)");
          conn2.send({ name: `<iframe src="${promt}" style="width: 100%;height: 1080px"></iframe>` });
          return
        }
      var peer1 = new Peer()
        var conn1;

        function startSlide1() {
            conn1.send({ name: "slide" });
            return
        }
        function startBoing1() {
          conn1.send({ name: "bounce" });
          return
        }
        function connectInfo1() {
          conn1.send({ name: "connect" });
          return
        }
      function black1() {
          conn1.send({ name: "black" });
          return
        }
        function reload1() {
          conn1.send({ name: "reload" });
          return
        }
        function box1() {
          let promt1 = prompt("Insert a link to display on TV2 (Make sure to include https:// or it will not work.)");
          conn1.send({ name: `<iframe src="${promt1}" style="width: 100%;height: 1080px"></iframe>` });
          return
        }
        function previewFile() {
          const preview = document.getElementById("displayimg1");
          const file = document.getElementById("formFile").files[0];
          const reader = new FileReader();

          reader.addEventListener(
            "load",
            () => {
            preview.src = reader.result;
          },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
    }
    function sendFile() {

          const file = document.getElementById("formFile").files[0];
          const reader = new FileReader();

          reader.addEventListener(
            "load",
            () => {
              conn.send({ name: `<center><img src="${reader.result}" style="height: 1080px"></img></center>` });
          },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
    }
    function previewFile1() {
          const preview = document.getElementById("displayimg2");
          const file = document.getElementById("formFile1").files[0];
          const reader = new FileReader();

          reader.addEventListener(
            "load",
            () => {
            preview.src = reader.result;
          },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
    }
    function sendFile1() {

          const file = document.getElementById("formFile1").files[0];
          const reader = new FileReader();

          reader.addEventListener(
            "load",
            () => {
              conn1.send({ name: `<center><img src="${reader.result}" style="height: 1080px"></img></center>` });
          },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
    }
    function previewFile2() {
          const preview = document.getElementById("displayimg3");
          const file = document.getElementById("formFile2").files[0];
          const reader = new FileReader();

          reader.addEventListener(
            "load",
            () => {
            preview.src = reader.result;
          },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
    }
    function sendFile2() {

          const file = document.getElementById("formFile2").files[0];
          const reader = new FileReader();

          reader.addEventListener(
            "load",
            () => {
              conn2.send({ name: `<center><img src="${reader.result}" style="height: 1080px"></img></center>` });
          },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
    }
        
        function peerConnect() {
          conn = peer.connect('rambam-mesivta-tv-screen-1', { key: "peerjs", port: 9000, host: "74.88.224.204" });
            conn.on("open", () => {
                $("#active").css("color", "green");
            });
            conn.on("close", () => {
                $("#active").css("color", "red");
            });
        }
      function peer1Connect() {
          conn1 = peer1.connect('rambam-mesivta-tv-screen-2', { key: "peerjs", port: 9000, host: "74.88.224.204" });
            conn1.on("open", () => {
                $("#active1").css("color", "green");
            });
            conn1.on("close", () => {
                $("#active1").css("color", "red");
            });
        }
        function peer2Connect() {
          conn2 = peer2.connect('rambam-mesivta-tv-screen-3', { key: "peerjs", port: 9000, host: "74.88.224.204" });
            conn2.on("open", () => {
                $("#active2").css("color", "green");
            });
            conn2.on("close", () => {
                $("#active2").css("color", "red");
            });
        }
    </script>
  </div>
    </div>
  </body>
</html>